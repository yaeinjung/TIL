# 정규표현식1

### A/B테스트

* 보통 95% 신뢰구간
* 소셜: 최근에 사람들이 많이 산 상품을 그냥 위로 올리는 알고리즘 
* 게임회사: 잘하는팀이 잘 못하는, 못하는팀은 잘하는 맵을 선정해서 랜덤인척 
* = RCT Randomized Controlled Test
* 데이터가 작은데 AB테스트를 진행하나요?
  * 너무 적을땐 광고집행을 한다. 
  * ex. 하루평균 방문자가 5명인 쇼핑몰.
    * 실행을 하기 위해서 10만원어치만 광고집행을 해본다.
    * 10만원씩 써서 점진적으로 개선한다.
    * 점진적으로 개선하는것은 린스타트업
* GA안에 AB테스트 제공 Google Optimized라는 AB테스트전용툴도있음. 하지만 툴보다는 해석하는게 중요하다. 
* GA로 실험하다 보면 하루에 한쪽으로 쏠리거나 실험 마지막에 계속 한쪽으로 쏠리는데 그런 경우에는 GA자체 내에서 AB테스트를 지속적으로 발전시키는 알고리즘을 쓰는 것을 설명할 줄 알아야 함
* 매직넘버 
  * 코드짤때 212344 : 인덱스넘버로 사용해야지! 
  * 한달후 : 212344 <- 이게뭐지?
  * 이런 숫자를 매직넘버라고 한다

## 정규표현식

패턴을 찾아내는 언어

* **파이썬** 정규표현식에서는  `\\` 역슬래쉬 두개가 등장한다  or 앞에 r을 붙인다

* 일반 정규표현식

  * `\d` : 숫자 한글자
  * `\D` : 숫자아닌것

* 파이썬 정규표현식

  * `r"\d` 여기서 `r"` 혹은 `r'`은 역슬래쉬가 이스케이프문자가 아닌 그냥 역슬래쉬로 인식하라고 표시해주는 문법
  * `r'` : rawstring의 r

* 메타캐릭터

  * `^` : 문장의 시작

  `^문재인`

  ```
  *문재인* 대통령님 안녕하세요
  저도 문재인 입니다
  
  사실저도 *문재인*
  ```

  * `$` : 문장의 끝

  `문재인$`

  ```
  문재인 대통령님 안녕하세요
  저도 문재인 입니다
  
  사실저도 *문재인*
  ```

  `^문재인$`

  ```
  문재인 대통령님 안녕하세요
  저도 문재인 입니다
  
  사실저도 문재인
  
  *문재인*
  ```

* `\` : 이스케이프문자

  `\$500`

  ```
  안녕하세요 *$500* 달러만 주세요^^
  ```

  \^\^

  ```
  안녕하세요 $500 달러만 주세요*^^*
  ```

  

* 어떨 때는 역슬래쉬가 두번(`\n`) 와야하고 어떤 때는 한번(`\$`)만 와도 실행되기 때문에 그냥 역슬래쉬 두번이나 r을 붙여주자..!!

* 캐릭터클래스

  * `[]`

  `[초 중 고]3`

  ```
  *고3*, *중3* 아이들을 키우는 아빠입니다.
  중**고3**
  ```

  `sep[ae]r[ae]te`

  ```
  sepirite
  *seperate*
  *separate*
  *separete*
  ```

  `스[튜투][어디][디어]스`

  ```
  고3, 중3 아이들을 키우는 아빠입니다.
  중고3 
  
  제 꿈은 *스튜어디스*가 되는 것입니다. *스튜디어스*인가? *스투어디스*였나? *스투디어스*인가? 아무튼 그렇습니다.
  
  *스튜어어스*
  *스투디디스*
  ```

  * 중1~고3까지 잡아내기

  ```
  df['content'].str.extractall(r'(([중고][1-3]))')
  ```

  -> 중1, 중2, 중3, 고1, 고2, 고3 모두 잡아냄

* 메타캐릭터

  * `.` : 아무거나 한글자
  * `\d` : 아무 숫자나 한글자 == `[0-9]`
  * `/D` : 숫자가 아닌 아무글자 하나
  * `\s` : 공백 하나
  * `\S` : 공백이 아닌 아무글자 하나
  * `\w` : 영문자 및 `_` 문자와 일치
  * `\b` : 단어의 경계를 나타냄
  * `\B` : 단어내에서 각문자 사이

  이씨 성을 가진 사람 중 이름 뒤에 씨 혹은 님이 붙는 텍스트 찾기

  ```
  df['content'].str.extractall(r"(이\S\S[씨님])")
  ```



# 정규표현식2

형식언어를 정규표현식이라고 한다. 

* 양화사 quantifier

  * `?` : 0개 혹은 1개

  * `+` : 한개 이상

  * `*` : 0개 이상

    ```
    \d[\d,]*원을.+손해
    ```

    ->5,000원을 손해

    ->5원을 손해

  * `{2}` : 정확히 2개 

    금액 표시

    ```
    \b[1-9]\d{0,2}(,\d{3})*원.+손해
    ```

    결과

    ```
    *5원을 손해*
    *5,000원을 손해*
    *5,000,000원 손해*
    *500원 손해*
    5,00원 손해
    
    5만원을 손해봤다
    5백만원을 손해봤다
    ```

* text1에서 019-1234-5678을 찾아서 +82 19-1234-5678로 바꾸기

  ```
  re.sub(r'019-1234-5678',r'+82 19-1234-5678',text1)
  ```

* 정규표현식에서 `.+\.` 을 쓰면 마침표를 쓰고 뒤에 더써도 모두 포함하게 된다 (greedy)

  ```
  *안녕하세요. 안녕하세요.*
  *안녕하세요.*
  ```

*  그런데 위에서  `.+?\.`  <- 가운데 `?`를 붙이면 non-greedy가 된다.

  ```
  *안녕하세요.* *안녕하세요*
  *안녕하세요.*
  ```

* 이메일 주소 잡는법

  ```
  \w[\w\+\.]*+@\w+(\.\w+)+
  ```